# 在eclipse下查看java源码以及源码的阅读方法

## 前言
通常喜欢读源码的人，都是因为内心有强大的求知欲，同时对自己的能力非常自信，还得具有耐心和坚持力。读源码并不是一朝一夕的事，而是一个长期积累的过程，所谓厚积薄发。下面结合自己读源码的体会，简单说下几点好处：

1.深入理解java语言。很多人做java开发，只知道怎么用，大概了解语法，但并不是很懂为什么要这么写，这样的后果就是模仿别人的代码，不能根据项目中的实际情况，写出高质量的代码。而当你阅读了java源码之后，你就会发现其实还可以有更高效的方法来解决问题，同时理解了底层原理之后，可以避免一些有可能会遇到的坑。

2.深入体会设计模式。当你深入java源码的时候，就会发现里面用到了很多设计模式，最好是总结一下哪些地方用到了哪些设计模式，这样可以提高自己在实际的开发中如何使用设计模式能力，让代码结构质量等有一个质的提高。

3.数据结构和算法。java源码很多地方都设计得非常的精妙，你平时经常使用的hashmap、List、Array等等底层是怎么实现的都可以在这里找到答案，通过研读这些源码，可以提高自己对数据结构和算法的理解。

## 在Eclipse中添加JDK类库的源代码和使用

### 设置
```
1. 点 “window”-> "Preferences" -> "Java" -> "Installed JRES"
2. 此时"Installed JRES"右边是列表窗格，列出了系统中的 JRE 环境，选择你的JRE，然后点边上的 "Edit..."， 会出现一个窗口(Edit JRE)
3. 选中rt.jar文件的这一项：“c:\program files\java\jre_1.5.0_06\lib\rt.jar” ，点 左边的“+” 号或者箭头展开它，
4. 展开后，可以看到“Source Attachment:(none)”，点这一项，点右边的按钮“Source Attachment...”, 选择你的JDK目录下的 “src.zip”文件
5. 一路OK结束
```

dt.jar是关于运行环境的类库,主要是swing的包 
tools.jar是关于一些工具的类库 
rt.jar包含了jdk的基础类库，也就是你在Java doc里面看到的所有的类的class文件

### 使用
可以在 Java 源代码编辑器或代码片段编辑测试窗中选择类型、方法或字段的名称，然后对元素的定义打开编辑器。
在 Java 编辑器中，选择类型、方法或字段的名称。您也可以仅仅在名称中单击一次。 
执行下列其中一项操作： 
1. 从菜单栏中，选择浏览 > 打开声明 
2. 从编辑器的弹出菜单中，选择打开声明 
3. 按 F3 键

## 关于阅读源码
强烈的求知欲，我认为是阅读源码的最核心驱动力。我见到绝大多数程序员，对学习的态度，基本上就是这几个层次(很偏激哦)：

```
1. 只关注项目本身，不懂就baidu一下。
2. 除了做好项目，还会阅读和项目有关的技术书籍，看wikipedia。
3. 除了阅读和项目相关的书外，还会阅读IT行业的书，比如学Java时，还会去了解函数语言，如LISP。
4. 找一些开源项目看看，大量试用第三方框架，还会写写demo。
5. 阅读基础框架、J2EE规范、Debug服务器内核。
```

大多数程序都是第1种，到第5种不光需要浓厚的兴趣，还需要勇气：我能读懂吗？其实，你能够读懂的。

耐心，真的很重要。因为你极少看到阅读源码的指导性文章或书籍，也没有人要求或建议你读。你读的过程中经常会卡住，而一卡主可能就陷进了迷宫。这时，你需要做的，可能是暂时中断一下，再从外围看看它：如API结构、框架的设计图。

## Java源码初接触
- 如果你进行过一年左右的开发，喜欢用eclipse的debug功能。好了，你现在就有阅读源码的技术基础。 
我建议从JDK源码开始读起，这个直接和eclipse集成，不需要任何配置。 

- 可以从JDK的工具包开始，也就是我们学的《数据结构和算法》Java版，如List接口和ArrayList、LinkedList实现，HashMap和TreeMap等。这些数据结构里也涉及到排序等算法，一举两得。 
面试时，考官总喜欢问ArrayList和Vector的区别，你花10分钟读读源码，估计一辈子都忘不了。 

- 然后是core包，也就是String、StringBuffer等。 
如果你有一定的Java IO基础，那么不妨读读FileReader等类。我建议大家看看《Java In A Nutshell》，里面有整个Java IO的架构图。Java IO类库，如果不理解其各接口和继承关系，则阅读始终是一头雾水。 
Java IO 包，我认为是对继承和接口运用得最优雅的案例。如果你将来做架构师，你一定会经常和它打交道，如项目中部署和配置相关的核心类开发。 

- 读这些源码时，只需要读懂一些核心类即可，如和ArrayList类似的二三十个类，对于每一个类，也不一定要每个方法都读懂。像String有些方法已经到虚拟机层了(native方法)，如hashCode方法。 

- 当然，如果有兴趣，可以对照看看JRockit的源码，同一套API，两种实现，很有意思的。 
如果你再想钻的话，不妨看看针对虚拟机的那套代码，如System ClassLoader的原理，它不在JDK包里，JDK是基于它的。JDK的源码Zip包只有10来M，它像是有50来M，Sun公司有下载的，不过很隐秘。我曾经为自己找到、读过它很兴奋了一阵。 

## Java数据库源码阅读 
- 我建议，先读读Sun的JDBC规范。 

- 我想你一定写过JDBC的代码，那么这时候可以开始阅读源码了。 
如果了解JDBC规范(接口)，那么它的实现，JDBC Driver就一定要开始了解，我的建议是，读读mysql的jdbc驱动，因为它开源、设计优雅。在读mysql的JDBC驱动源码时，建议看看mysql的内幕，官方正好有本书，《Mysql Internals》，我五年前读过一部分。比如你可以知道mysql的JDBC驱动，如何通过socket数据包(connect、query)，给这个C++开发的mysql服务器交互的。 

- 通过上面的阅读，你可以知道，你的业务代码、JDBC规范、JDBC驱动、以及数据库，它们是如何一起协作的。 
如果你了解这些内幕，那么你再学习Hibernate、iBatis等持久化框架时，就会得心应手的。 

- 读过JDBC驱动，那么下一步一定要读读数据库了。而正好有一个强大的数据库是用Java开发的，Hsqldb。它是嵌入式数据库，比如用在桌面客户端软件里，如Mail Client。 

## Java Web开发源码 
在阅读Tomcat等源码前，一定要有一定的积累。我的切实体会，也可以说是比较好的阶梯是： 

1. 写过一些Servlet和JSP代码。注意，不是用什么Struts，它是很难接触到Servlet精髓的。用好Struts只是皮毛。 
2. 看过《Servlet和JSP核心编程》 
3. 看过Sun公司的Servlet规范 
4. 看过http协议的rfc，debug过http的数据包
5. 
如果有以上基础，我也不建议你开始读Tomcat源码。我建议你在阅读Tomcat源码前，读过Struts源码，Struts源码比WebWork要简单得多。这个框架是可以100%读懂的，至少WebWork我没有100%读懂。我曾经因为读懂了Struts源码，自己写过一个Web框架。 

当然，在读Struts框架前，最好看过它的MailReader等demo，非常非常不错的。 
如果你做过一些Struts项目，那么读它时就更得心应手了。 
在读Struts前，建议看看mvnforum的源码，它部分实现了Struts的功能，虽然这个BBS做得不敢恭维。 

如果你读过Struts，再开始考虑Tomcat源码阅读吧。 
不过，我还是不建议直接读它，先读读onJava网站上的系列文章《How Tomcat Works》吧，它才是Tomcat的最最简易版。它告诉你HttpServletRequest如何在容器内部实现的，Tomcat如何通过Socket来接受外面的请求，你的Servlet代码如何被Tomcat容器调用的(回调)。 
学习JSP，一定要研读容器将JSP编译后的Servlet源码。 

如果你一定要读Tomcat，那么就读Jetty吧。至少它是嵌入式，可以直接在eclispe里面设置断点debug。虽然Tomcat也有嵌入式版本。 

## Java企业级应用 

- 当然了，就是Hibernate、Spring这类框架。 

- 在读Spring源码前，一定要先看看Rod Johnson写的那边《J2EE Design and Development》，它是Spring的设计思路。注意，不是中文版，中文版完全被糟蹋了。
 
- 在读Hibernate源码前，一定要读读Gavin King写的那本《Hibernate in Action》，同时，应该再读读Martin Fowler写的《企业应用架构模式》，它专门谈到持久化框架的设计思路。当你觉得这两本书读透了,再去看它们源码吧。 
而且，在读源码前，你会发现它们用到很多第三方Jar包，二三十个，你最好把那些Jar包先一个个搞明白。 

- 说到企业应用，一定会涉及到工作流。我当年读过jBPM的源码，网上有介绍jBPM内核的文章(银狐)。我感觉它的内核也就两千行，不要害怕。我曾经阅读jBPM源码的博客。 
- 当然了，读工作流源码，前提是一定要对其理论模型有深入的了解，以及写过一些demo、或做过一些项目。 



参考：[https://blog.csdn.net/guotufu/article/details/80247268](https://blog.csdn.net/guotufu/article/details/80247268 "读java源码的好处") 
